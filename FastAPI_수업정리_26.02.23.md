# π€ FastAPI μ…λ¬Έ μμ—… μ •λ¦¬

> μ‘μ„±μΌ: 2025λ…„ 2μ›” 23μΌ | μ²« λ²μ§Έ μμ—…

---

## 1. κ°λ° ν™κ²½ μ„¤μ • (Environment Setup)

### κ°€μƒν™κ²½(Virtual Environment)μ΄λ€?

ν”„λ΅μ νΈλ§λ‹¤ λ…λ¦½μ μΈ νμ΄μ¬ ν¨ν‚¤μ§€ κ³µκ°„μ„ λ§λ“λ” κ²ƒ
μλ¥Ό λ“¤μ–΄, ν”„λ΅μ νΈ Aλ” FastAPI 0.1, ν”„λ΅μ νΈ Bλ” FastAPI 0.5λ¥Ό λ”°λ΅ μ‚¬μ©ν•  μ μμ

```bash
# κ°€μƒν™κ²½ ν΄λ” ν™•μΈ
ls -al .venv

# κ°€μƒν™κ²½ ν™μ„±ν™” (Mac/Linux)
source .venv/bin/activate

# ν™μ„±ν™” ν›„ ν„°λ―Έλ„ μ•μ— (.venv) ν‘μ‹κ°€ μƒκΉ€
(.venv) β― admin  ~/Desktop/μ‹¤μµ/FastAPI  master
```

> π’΅ **ν•µμ‹¬ ν¬μΈνΈ**  
> - `which python` λ…λ Ήμ–΄λ΅ ν„μ¬ μ‚¬μ© μ¤‘μΈ νμ΄μ¬ κ²½λ΅λ¥Ό ν™•μΈν•  μ μμ
> - κ°€μƒν™κ²½ ν™μ„±ν™” μ „: `/opt/homebrew/bin/python3`  
> - κ°€μƒν™κ²½ ν™μ„±ν™” ν›„: `/Users/admin/Desktop/μ‹¤μµ/FastAPI/.venv/bin/python` β† μ΄κ² μ •μƒ!

---

### FastAPI μ„¤μΉ

```bash
pip install "fastapi[standard]"
```

`[standard]`λ¥Ό λ¶™μ΄λ©΄ FastAPI μ‹¤ν–‰μ— ν•„μ”ν• μ—¬λ¬ λ„κµ¬λ“¤μ΄ ν•¨κ» μ„¤μΉ λ¨
μ£Όμ” μ„¤μΉ ν¨ν‚¤μ§€λ“¤:

| ν¨ν‚¤μ§€ | μ—­ν•  |
|---|---|
| `fastapi` | μ›Ή ν”„λ μ„μ›ν¬ λ³Έμ²΄ |
| `uvicorn` | μ„λ²„ μ‹¤ν–‰κΈ° (ASGI μ„λ²„) |
| `pydantic` | λ°μ΄ν„° κ²€μ¦ λΌμ΄λΈλ¬λ¦¬ |
| `httpx` | HTTP ν΄λΌμ΄μ–ΈνΈ |
| `starlette` | FastAPIμ κΈ°λ° ν”„λ μ„μ›ν¬ |

---

## 2. FastAPI κΈ°λ³Έ κ°λ…

### HTTP μ”μ²­(Request)μ΄λ€?

μ›Ήμ—μ„ ν΄λΌμ΄μ–ΈνΈ(λΈλΌμ°μ €, μ•± λ“±)κ°€ μ„λ²„μ— λ°μ΄ν„°λ¥Ό μ”μ²­ν•λ” λ°©μ‹
λ€ν‘μ μΈ HTTP λ©”μ„λ“:

| λ©”μ„λ“ | μλ―Έ | μμ‹ |
|---|---|---|
| `GET` | λ°μ΄ν„° μ΅°ν | μ‚¬μ©μ λ©λ΅ κ°€μ Έμ¤κΈ° |
| `POST` | λ°μ΄ν„° μƒμ„± | μƒ μ‚¬μ©μ λ§λ“¤κΈ° |
| `PUT` | λ°μ΄ν„° μμ • | μ‚¬μ©μ μ •λ³΄ λ³€κ²½ |
| `DELETE` | λ°μ΄ν„° μ‚­μ  | μ‚¬μ©μ μ‚­μ  |

---

### λ°μ½”λ μ΄ν„°(Decorator)λ€?

`@` κΈ°νΈλ΅ μ‹μ‘ν•λ” λ¬Έλ²•μΌλ΅, **ν•¨μμ— μ¶”κ°€ κΈ°λ¥μ„ λ¶€μ—¬**ν•©λ‹λ‹¤.

```python
@app.get("/users")   # β† μ΄κ² λ°μ½”λ μ΄ν„°
def get_users_handler():
    return users
```

μ„ μ½”λ“μ μλ―Έ:  
> "μ„λ²„μ— `GET /users` μ”μ²­μ΄ λ“¤μ–΄μ¤λ©΄ `get_users_handler` ν•¨μλ¥Ό μ‹¤ν–‰ν•΄λΌ"

---

## 3. μ‹¤μµ μ½”λ“ λ¶„μ„

### μ „μ²΄ μ½”λ“

```python
from fastapi import FastAPI

# μ„μ‹ λ°μ΄ν„° (λ‚μ¤‘μ—λ” λ°μ΄ν„°λ² μ΄μ¤λ΅ λ€μ²΄)
users = [
    {"id": 1, "name": "Alice"},
    {"id": 2, "name": "Bob"},
    {"id": 3, "name": "Charlie"},
]

app = FastAPI()  # FastAPI μ•± μΈμ¤ν„΄μ¤ μƒμ„±
```

---

### API 1: μ „μ²΄ μ‚¬μ©μ λ©λ΅ μ΅°ν

```python
@app.get("/users")
def get_users_handler():
    return users
```

**λ™μ‘ λ°©μ‹:**

```
λΈλΌμ°μ €/μ•±  β†’  GET μ”μ²­ /users  β†’  μ„λ²„  β†’  users μ „μ²΄ λ©λ΅ λ°ν™
```

**μ‘λ‹µ μμ‹:**
```json
[
  {"id": 1, "name": "Alice"},
  {"id": 2, "name": "Bob"},
  {"id": 3, "name": "Charlie"}
]
```

---

### API 2: λ‹¨μΌ μ‚¬μ©μ μ΅°ν (Path Parameter)

```python
@app.get("/users/{user_id}")
def get_user_handler(user_id: int):
    return users[user_id - 1]
```

#### Path Parameter(κ²½λ΅ λ§¤κ°λ³€μ)λ€?

URL κ²½λ΅ μ•μ—μ„ **λ™μ μΌλ΅ λ°”λ€λ” κ°’**μ„ μ²λ¦¬ν•λ” λ°©λ²•

```
GET /users/1  β†’  user_id = 1  β†’  users[0]  β†’  {"id": 1, "name": "Alice"}
GET /users/2  β†’  user_id = 2  β†’  users[1]  β†’  {"id": 2, "name": "Bob"}
GET /users/3  β†’  user_id = 3  β†’  users[2]  β†’  {"id": 3, "name": "Charlie"}
```

> π’΅ **`{user_id}`κ°€ μ—†λ‹¤λ©΄?**  
> μ‚¬μ©μκ°€ 1λ²μ΄λ©΄ `/users/1`, 2λ²μ΄λ©΄ `/users/2`... μ΄λ ‡κ²  
> μ—”λ“ν¬μΈνΈλ¥Ό λ¬΄ν•ν λ§λ“¤μ–΄μ•Ό ν•¨ Path Parameterλ΅ μ΄λ¥Ό ν•λ‚λ΅ ν†µν•©!

#### Type Hint (`user_id: int`)μ μ—­ν• 

```python
def get_user_handler(user_id: int):
```

1. **νƒ€μ… κ²€μ¦**: URLλ΅ λ“¤μ–΄μ¨ κ°’μ΄ μ •μμΈμ§€ μλ™μΌλ΅ ν™•μΈ
2. **μλ™ λ³€ν™**: URLμ λ¬Έμμ—΄ `"1"` β†’ μ •μ `1`λ΅ μλ™ λ³€ν™
3. **μ¤λ¥ μ²λ¦¬**: μ •μκ°€ μ•„λ‹ κ°’(`/users/abc`)μ΄ μ¤λ©΄ μλ™μΌλ΅ 422 μ—λ¬ λ°ν™

---

## 4. μ½”λ“ μ£Όμ„ ν•΄μ„¤

μ½”λ“μ— λ‚μ¤λ” μ£Όμ„ μ„¤λ…:

```python
# @app.get("/users/1")
# def get_first_handler():
#     return users[0]
```

μ΄ μ£Όμ„ μ²λ¦¬λ μ½”λ“κ°€ **λ‚μ μμ‹**μΈ μ΄μ :
- 1λ² μ‚¬μ©μμ© ν•¨μ, 2λ² μ‚¬μ©μμ© ν•¨μ... μ‚¬μ©μ μλ§νΌ ν•¨μκ°€ ν•„μ”
- `{user_id}` Path Parameterλ¥Ό μ“°λ©΄ **ν•λ‚μ ν•¨μλ΅ λ¨λ‘ μ²λ¦¬** κ°€λ¥!

---

## 5. ν•µμ‹¬ κ°λ… μ”μ•½

```
FastAPI μ•± νλ¦„

ν΄λΌμ΄μ–ΈνΈ
    β”‚
    β”‚  GET /users/2
    β–Ό
FastAPI λΌμ°ν„°
    β”‚
    β”‚  @app.get("/users/{user_id}") λ§¤μΉ­
    β–Ό
get_user_handler(user_id=2)
    β”‚
    β”‚  users[2-1] = users[1]
    β–Ό
{"id": 2, "name": "Bob"} λ°ν™
```

---

## 6. μ©μ–΄ μ •λ¦¬

| μ©μ–΄ | μ„¤λ… |
|---|---|
| **FastAPI** | νμ΄μ¬μΌλ΅ API μ„λ²„λ¥Ό λΉ λ¥΄κ² λ§λ“¤ μ μλ” ν”„λ μ„μ›ν¬ |
| **API** | μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈκ°€ λ°μ΄ν„°λ¥Ό μ£Όκ³ λ°›λ” κ·μΉ™/μΈν„°νμ΄μ¤ |
| **μ—”λ“ν¬μΈνΈ(Endpoint)** | APIμ—μ„ νΉμ • κΈ°λ¥μ„ μ κ³µν•λ” URL μ£Όμ† (μ: `/users`) |
| **λΌμ°ν„°(Router)** | νΉμ • URL μ”μ²­μ„ μ–΄λ–¤ ν•¨μλ΅ μ—°κ²°ν• μ§€ κ²°μ •ν•λ” μ‹μ¤ν… |
| **Path Parameter** | URL κ²½λ΅ μ•μ— ν¬ν•¨λ λ™μ  λ³€μ (μ: `/users/{user_id}`) |
| **λ°μ½”λ μ΄ν„°(Decorator)** | `@` κΈ°νΈλ΅ ν•¨μμ— μ¶”κ°€ κΈ°λ¥μ„ λ¶€μ—¬ν•λ” νμ΄μ¬ λ¬Έλ²• |
| **Type Hint** | λ³€μλ‚ λ§¤κ°λ³€μμ νƒ€μ…μ„ λ…μ‹ν•λ” νμ΄μ¬ λ¬Έλ²• (μ: `user_id: int`) |
| **uvicorn** | FastAPI μ•±μ„ μ‹¤ν–‰μ‹μΌμ£Όλ” μ„λ²„ ν”„λ΅κ·Έλ¨ |
| **κ°€μƒν™κ²½** | ν”„λ΅μ νΈλ³„λ΅ λ…λ¦½λ νμ΄μ¬ ν¨ν‚¤μ§€ ν™κ²½ |

---

## 7. μ„λ²„ μ‹¤ν–‰ λ°©λ²•

### λ°©λ²• 1: `python main.py` (μ§μ ‘ μ‹¤ν–‰)

```bash
python main.py
```

`main.py` νμΌ μ•μ— μ„λ²„ μ‹¤ν–‰ μ½”λ“κ°€ μ§μ ‘ ν¬ν•¨λμ–΄ μμ„ λ• μ‚¬μ©

```python
# main.py μ•μ— μ΄λ° μ½”λ“κ°€ μμ–΄μ•Ό ν•¨
if __name__ == "__main__":
    import uvicorn
    uvicorn.run(app, host="0.0.0.0", port=8000)
```

> β οΈ μ΄ λ°©μ‹μ€ μ„λ²„ μ½”λ“λ¥Ό νμΌ μ•μ— μ§μ ‘ μ¨μ•Ό ν•΄μ„ λ²κ±°λ΅­κ³ , **κ°λ° μ¤‘ μ½”λ“ λ³€κ²½ μ‹ μ„λ²„λ¥Ό μλ™μΌλ΅ μ¬μ‹μ‘**ν•΄μ•Ό ν•¨

---

### λ°©λ²• 2: `fastapi dev` (κ¶μ¥ β…)

```bash
fastapi dev
# λλ” νμΌλ…μ„ μ§μ ‘ μ§€μ •ν•  μ μμ
fastapi dev main.py
```

FastAPI κ³µμ‹ CLI λ„κµ¬λ΅ μ‹¤ν–‰ν•λ” λ°©λ²• 
κ°λ° μ‹ κ°€μ¥ λ§μ΄ μ‚¬μ©ν•λ” λ°©μ‹

**`fastapi dev`μ νΉμ§•:**

| κΈ°λ¥ | μ„¤λ… |
|---|---|
| **μλ™ μ¬μ‹μ‘ (Hot Reload)** | μ½”λ“λ¥Ό μ €μ¥ν•λ©΄ μ„λ²„κ°€ μλ™μΌλ΅ μ¬μ‹μ‘λ¨ |
| **μλ™ λ¬Έμ„ μƒμ„±** | `http://localhost:8000/docs` μ—μ„ API λ¬Έμ„ ν™•μΈ κ°€λ¥ |
| **κ°λ° λ¨λ“** | λ””λ²„κ·Έ μ •λ³΄λ¥Ό λ” μƒμ„Έν•κ² μ¶λ ¥ |

**μ‹¤ν–‰ ν›„ μ ‘μ† κ°€λ¥ν• μ£Όμ†:**

```
http://localhost:8000        β† API μ„λ²„
http://localhost:8000/docs   β† Swagger UI (μλ™ μƒμ„± API λ¬Έμ„)
http://localhost:8000/redoc  β† ReDoc (λ λ‹¤λ¥Έ ν•μ‹μ API λ¬Έμ„)
```

> π’΅ **`fastapi` λ…λ Ήμ–΄λ” μ–΄λ””μ„ μ™”λ‚?**  
> `pip install "fastapi[standard]"` μ„¤μΉ μ‹ ν•¨κ» μ„¤μΉλ `fastapi-cli` ν¨ν‚¤μ§€ λ•λ¶„μ—  
> ν„°λ―Έλ„μ—μ„ `fastapi` λ…λ Ήμ–΄λ¥Ό μ‚¬μ©ν•  μ μμµλ‹λ‹¤.  
> `which fastapi` β†’ `/Users/admin/.../FastAPI/.venv/bin/fastapi` λ΅ κ°€μƒν™κ²½ μ•μ— μμμ„ ν™•μΈ!

---

### μ„λ²„ μ‹¤ν–‰ ν›„ λΈλΌμ°μ €μ—μ„ ν™•μΈν•κΈ°

`fastapi dev` μ‹¤ν–‰ ν›„ λΈλΌμ°μ €μ—μ„ μ•„λ μ£Όμ†λ“¤λ΅ μ ‘μ†ν•  μ μμ

#### π“ `http://127.0.0.1:8000` (= `http://localhost:8000`)

> `127.0.0.1`μ€ λ‚΄ μ»΄ν“¨ν„° μμ‹ μ„ κ°€λ¦¬ν‚¤λ” IP μ£Όμ† `localhost`μ™€ μ™„μ „ν λ™μΌ

API μ—”λ“ν¬μΈνΈμ— μ§μ ‘ μ ‘μ†ν•λ” μ£Όμ†

```
http://127.0.0.1:8000/users       β†’ μ „μ²΄ μ‚¬μ©μ λ©λ΅ JSON λ°ν™
http://127.0.0.1:8000/users/1     β†’ 1λ² μ‚¬μ©μ JSON λ°ν™
http://127.0.0.1:8000/users/2     β†’ 2λ² μ‚¬μ©μ JSON λ°ν™
```

---

#### π“ `http://127.0.0.1:8000/docs` (Swagger UI) β­ κ°€μ¥ μ¤‘μ”!

FastAPIκ°€ **μλ™μΌλ΅ λ§λ“¤μ–΄μ£Όλ” API ν…μ¤νΈ λ¬Έμ„ νμ΄μ§€**
μ½”λ“λ¥Ό ν• μ¤„λ„ μ¶”κ°€ν•μ§€ μ•μ•„λ„ μλ™ μƒμ„±!

**ν•  μ μλ” κ²ƒλ“¤:**
- λ‚΄κ°€ λ§λ“  API λ©λ΅μ„ ν•λμ— ν™•μΈ
- λΈλΌμ°μ €μ—μ„ μ§μ ‘ API μ”μ²­μ„ λ³΄λ‚΄κ³  μ‘λ‹µ ν™•μΈ (postman μ—†μ΄λ„ ν…μ¤νΈ κ°€λ¥!)
- κ° APIμ νλΌλ―Έν„°, μ‘λ‹µ ν•μ‹ λ“±μ„ μλ™μΌλ΅ λ¬Έμ„ν™”ν•΄μ„ λ³΄μ—¬μ¤

**μ‚¬μ© λ°©λ²•:**
1. `/docs` μ ‘μ†
2. ν…μ¤νΈν•  API ν΄λ¦­ (μ: `GET /users/{user_id}`)
3. **"Try it out"** λ²„νΌ ν΄λ¦­
4. `user_id` κ°’ μ…λ ¥ (μ: `1`)
5. **"Execute"** λ²„νΌ ν΄λ¦­
6. μ•„λμ— μ‘λ‹µ κ²°κ³Ό ν™•μΈ

---

#### π“ `http://127.0.0.1:8000/redoc`

`/docs`μ™€ λ™μΌν• λ‚΄μ©μ΄μ§€λ§ **μ½κΈ° μ „μ© λ¬Έμ„ ν•μ‹**μΌλ΅ λ³΄μ—¬ μ¤
ν…μ¤νΈλ³΄λ‹¤λ” API μ¤ν™ λ¬Έμ„λ¥Ό κΉ”λ”ν•κ² ν™•μΈν•  λ• μ‚¬μ©

---

### λ‘ λ°©λ²• λΉ„κµ

| | `python main.py` | `fastapi dev` |
|---|---|---|
| μ½”λ“ λ³€κ²½ ν›„ μ¬μ‹μ‘ | μλ™ | μλ™ β… |
| API λ¬Έμ„ μλ™ μƒμ„± | X | O β… |
| μ‚¬μ© νΈμμ„± | λ‚®μ | λ†’μ β… |
| μ–Έμ  μ“°λ‚? | λ°°ν¬(Production) μ‹ | κ°λ°(Development) μ‹ |

---

> π“ **μ¤λ μμ—… ν•µμ‹¬ ν• μ¤„ μ”μ•½**  
> FastAPIλ” `@app.get()` κ°™μ€ λ°μ½”λ μ΄ν„°λ΅ URLκ³Ό ν•¨μλ¥Ό μ—°κ²°ν•κ³ ,  
> `{λ³€μλ…}` Path Parameterλ΅ λ™μ μΈ URLμ„ ν•λ‚μ ν•¨μλ΅ μ²λ¦¬ν•λ‹¤!
